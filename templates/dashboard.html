{% extends 'base.html' %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-12">

  <!-- Stats Section -->
  <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-12">
    <div class="bg-white p-6 rounded-2xl shadow flex flex-col items-center">
      <div class="text-indigo-600 text-3xl font-bold">{{ stats.offered_count }}</div>
      <p class="text-gray-600 text-sm mt-1">Skills Offered</p>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow flex flex-col items-center">
      <div class="text-blue-600 text-3xl font-bold">{{ stats.wanted_count }}</div>
      <p class="text-gray-600 text-sm mt-1">Skills Wanted</p>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow flex flex-col items-center">
      <div class="text-yellow-600 text-3xl font-bold">{{ stats.active_requests }}</div>
      <p class="text-gray-600 text-sm mt-1">Active Requests</p>
    </div>
    <div class="bg-white p-6 rounded-2xl shadow flex flex-col items-center">
      <div class="text-green-600 text-3xl font-bold">{{ stats.completed_swaps }}</div>
      <p class="text-gray-600 text-sm mt-1">Completed Swaps</p>
    </div>
  </div>

  <!-- Requests Navigation -->
  <div class="flex gap-4 mb-12">
    <a href="{{ url_for('received_requests') }}" 
       class="px-5 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition">
      ðŸ“¥ View Received Requests
    </a>
    <a href="{{ url_for('sent_requests') }}" 
       class="px-5 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition">
      ðŸ“¤ Request Status
    </a>
  </div>

  <!-- Page Title -->
  <h2 class="text-3xl font-bold mb-8 text-gray-800">âœ¨ Suggested Matches</h2>

  <!-- Matches Grid -->
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {% for u in matches %}
    <div class="bg-white rounded-2xl shadow hover:shadow-lg transition p-6 flex flex-col">
      
      <!-- Header: Avatar + Name -->
      <div class="flex items-center mb-4">
        <div class="w-12 h-12 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold">
          {{ u.name[0]|upper }}
        </div>
        <h3 class="ml-4 text-lg font-semibold text-gray-800">{{ u.name }}</h3>
      </div>

      <!-- Offered Skills -->
      <div class="mb-3">
        <p class="text-sm font-medium text-gray-500">Offers:</p>
        <div class="mt-1 flex flex-wrap gap-2">
          {% for skill in u.offered %}
          <span class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded-full">
            {{ skill.skill.name }}
          </span>
          {% endfor %}
        </div>
      </div>

      <!-- Wanted Skills -->
      <div class="mb-4">
        <p class="text-sm font-medium text-gray-500">Wants:</p>
        <div class="mt-1 flex flex-wrap gap-2">
          {% for skill in u.wanted %}
          <span class="px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-full">
            {{ skill.skill.name }}
          </span>
          {% endfor %}
        </div>
      </div>

      <!-- Action Button -->
      <a href="/request/{{ u.id }}" 
         class="mt-auto inline-block text-center bg-indigo-600 hover:bg-indigo-700 text-white font-medium px-4 py-2 rounded-lg transition">
        Request Swap â†’
      </a>
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="col-span-full text-center py-16">
      <div class="mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-gray-100 mb-4">
        <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M12 8c-1.657 0-3 1.343-3 3s1.343 3 3 3
                   3-1.343 3-3-1.343-3-3-3zm0 0V4m0 16v-4m8-4h-4m-8 0H4"/>
        </svg>
      </div>
      <p class="text-gray-600 text-lg">No matches yet.</p>
      <p class="text-gray-500">Update your profile with offered and wanted skills to find swap partners.</p>
      <a href="{{ url_for('profile') }}" 
         class="mt-4 inline-block px-5 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition">
        Update Profile
      </a>
    </div>
    {% endfor %}
  </div>

</div>
{% endblock %}
